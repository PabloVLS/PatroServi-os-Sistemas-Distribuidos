<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Patro Serviços - Plataforma de Profissionais</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    :root { 
      --grad: linear-gradient(135deg,#667eea 0%,#764ba2 100%);
      --primary: #667eea;
      --primary-dark: #5a6fd8;
    }
    body { background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%); min-height: 100vh; }
    .hero { background: var(--grad); border-radius: 20px; color: #fff; position: relative; overflow: hidden; box-shadow: 0 15px 35px rgba(102, 126, 234, 0.2); }
    .hero::before { content: ''; position: absolute; inset: 0; background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000"><polygon fill="rgba(255,255,255,0.05)" points="0,1000 1000,0 1000,1000"/></svg>'); background-size: cover; }
    .hero h1 { font-weight: 700; text-shadow: 0 2px 10px rgba(0,0,0,0.1); }
    .nav-link { font-weight: 500; transition: all 0.3s ease; border-radius: 8px; margin: 0 2px; }
    .nav-link:hover { background: rgba(102, 126, 234, 0.1); transform: translateY(-1px); }
    .navbar-brand { font-weight: 700; background: var(--grad); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; font-size: 1.5rem; }
    .user-avatar { width: 36px; height: 36px; background: var(--grad); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: 600; font-size: 14px; border: 2px solid white; box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3); transition: all 0.3s ease; }
    .user-dropdown-toggle:hover .user-avatar { transform: scale(1.05); box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4); }
    .user-dropdown-toggle { display: flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 10px; transition: all 0.3s ease; text-decoration: none; border: none; background: transparent; }
    .user-dropdown-toggle:hover { background: rgba(102, 126, 234, 0.08); }
    .user-name { font-weight: 600; color: #333; max-width: 120px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }
    .dropdown-menu { border: none; box-shadow: 0 10px 30px rgba(0,0,0,0.15); border-radius: 12px; padding: 8px; margin-top: 8px; }
    .dropdown-item { border-radius: 8px; padding: 10px 16px; margin: 2px 0; transition: all 0.3s ease; font-weight: 500; }
    .dropdown-item:hover { background: rgba(102, 126, 234, 0.1); transform: translateX(4px); }
    .dropdown-item.text-danger:hover { background: rgba(220, 53, 69, 0.1); }
    .btn-light { background: rgba(255,255,255,0.95); border: none; font-weight: 600; box-shadow: 0 4px 15px rgba(255,255,255,0.3); transition: all 0.3s ease; }
    .btn-light:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(255,255,255,0.4); }
    .btn-outline-light { border: 2px solid rgba(255,255,255,0.8); font-weight: 600; transition: all 0.3s ease; }
    .btn-outline-light:hover { background: rgba(255,255,255,0.15); transform: translateY(-2px); border-color: white; }
    .card { border: none; border-radius: 16px; transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card:hover { transform: translateY(-2px); }
    .form-control { border-radius: 10px; border: 2px solid #e9ecef; padding: 12px 16px; transition: all 0.3s ease; }
    .form-control:focus { border-color: var(--primary); box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25); }
    .btn-primary { background: var(--grad); border: none; border-radius: 10px; font-weight: 600; padding: 12px 24px; transition: all 0.3s ease; }
    .btn-primary:hover { transform: translateY(-2px); box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4); }
    footer { background: rgba(255,255,255,0.8); backdrop-filter: blur(10px); border-top: 1px solid rgba(0,0,0,0.1); }
    .navbar { transition: all 0.3s ease; }
    .fade-in { animation: fadeIn 0.5s ease-in; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(-10px); } to { opacity: 1; transform: translateY(0); } }
    .hero-illustration { position: relative; animation: float 3s ease-in-out infinite; }
    @keyframes float { 0%, 100% { transform: translateY(0px); } 50% { transform: translateY(-10px); } }
  </style>
  <script src="./js/config.js"></script>
</head>
<body>
<nav class="navbar navbar-expand-lg bg-white shadow-sm mb-4">
  <div class="container">
    <a class="navbar-brand" href="./index.html">
      <i class="bi bi-building-gear me-2"></i>PatroServiços
    </a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#nav" aria-controls="nav" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="nav">
      <ul class="navbar-nav ms-auto mb-2 mb-lg-0 align-items-center" id="navLinks">
        <li class="nav-item" id="itemCadastroProfissional"><a class="nav-link" href="./profissional-cadastro.html">Cadastro Profissional</a></li>
        <li class="nav-item" id="itemLoginCliente"><a class="nav-link" href="./loginCliente.html">Login Cliente</a></li>
        <li class="nav-item" id="itemLoginProf"><a class="nav-link" href="./loginProfissional.html">Login Profissional</a></li>
        <li class="nav-item dropdown d-none" id="userDropdown">
          <a class="nav-link user-dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <div class="user-avatar" id="userAvatar"><i class="bi bi-person-fill"></i></div>
            <span class="user-name" id="userDisplayName">Usuário</span>
            <i class="bi bi-chevron-down small text-muted"></i>
          </a>
          <ul class="dropdown-menu dropdown-menu-end shadow">
            <li><a class="dropdown-item d-none" id="menuMeuPerfilProfissional" href="./profissional-meu-perfil.html"><i class="bi bi-person-badge me-2"></i>Meu Perfil (Profissional)</a></li>
            <li><a class="dropdown-item d-none" id="menuMeuPerfilCliente" href="./cliente-meu-perfil.html"><i class="bi bi-person-circle me-2"></i>Meu Perfil (Cliente)</a></li>
            <li><hr class="dropdown-divider" id="dividerPerfil" class="d-none"></li>
            <li><a class="dropdown-item text-danger" href="#" onclick="fazerLogout()"><i class="bi bi-box-arrow-right me-2"></i>Sair</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container mb-5">
  <div class="hero p-5 mb-5 position-relative">
    <div class="row align-items-center position-relative">
      <div class="col-lg-8">
        <h1 class="display-5 fw-bold mb-3">Encontre Profissionais de Confiança</h1>
        <p class="lead mb-4 opacity-90">Conectamos você aos melhores especialistas da sua região com segurança e agilidade.</p>
        <div class="d-flex gap-3 flex-wrap">
          <a href="./profissional-cadastro.html" class="btn btn-light btn-lg px-4" id="btnSouProfissional"><i class="bi bi-person-plus me-2"></i> Sou Profissional</a>
          <a href="./loginCliente.html" class="btn btn-outline-light btn-lg px-4" id="btnSouCliente"><i class="bi bi-person me-2"></i> Sou Cliente</a>
          <button class="btn btn-outline-light btn-lg px-4" onclick="scrollToLista()"><i class="bi bi-search me-2"></i> Buscar Profissionais</button>
        </div>
      </div>
      <div class="col-lg-4 text-center mt-4 mt-lg-0"><div class="hero-illustration"><i class="bi bi-tools text-white" style="font-size: 6rem; opacity: 0.9;"></i></div></div>
    </div>
  </div>

  <div class="card border-0 shadow-sm mb-4" id="filtrosSection">
    <div class="card-body p-4">
      <div class="row g-3 align-items-end">
        <div class="col-md-4"><label class="form-label fw-semibold">Profissão</label><input id="filtroProfissao" class="form-control" placeholder="Ex: Eletricista, Encanador..."></div>
        <div class="col-md-4"><label class="form-label fw-semibold">Cidade</label><input id="filtroCidade" class="form-control" placeholder="Ex: São Paulo, Rio de Janeiro..."></div>
        <div class="col-md-4 d-flex gap-2"><button class="btn btn-primary flex-fill" onclick="carregarProfissionais()"><i class="bi bi-funnel me-1"></i>Filtrar</button><button class="btn btn-outline-secondary" onclick="resetFiltros()"><i class="bi bi-arrow-clockwise"></i></button></div>
      </div>
    </div>
  </div>

  <div class="d-flex justify-content-between align-items-center mb-3" id="listaHeader">
    <h4 class="mb-0 fw-bold text-dark">Profissionais Disponíveis</h4>
    <span class="badge bg-primary fs-6 px-3 py-2" id="contadorProfissionais">—</span>
  </div>
  <div class="row g-4" id="listaProfissionais"></div>
  <div id="semProfissionais" class="text-center py-5 d-none">
    <div class="text-muted">
      <i class="bi bi-people display-5 d-block mb-3 opacity-50"></i>
      <h5 class="text-muted">Nenhum profissional encontrado</h5>
      <p class="mb-3">Tente ajustar os filtros ou buscar por outras categorias.</p>
      <button class="btn btn-outline-primary" onclick="resetFiltros()"><i class="bi bi-arrow-clockwise me-1"></i>Limpar Filtros</button>
    </div>
  </div>
</div>

<script src="./js/home.js"></script>

<footer class="text-center py-4 mt-5">
  <div class="container">
    <div class="row align-items-center">
      <div class="col-md-6 text-md-start">
        <h6 class="fw-bold mb-2"><i class="bi bi-building-gear me-2"></i>PatroServiços</h6>
        <p class="text-muted small mb-0">Conectando você aos melhores profissionais</p>
      </div>
      <div class="col-md-6 text-md-end"><span class="text-muted small">&copy; 2025 PatroServiços - Todos os direitos reservados</span></div>
    </div>
  </div>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function usuarioLogado(){ return !!(sessionStorage.getItem('usuarioProfissionalId') || sessionStorage.getItem('clienteUsuarioId')); }
  function tipoLogado(){ if(sessionStorage.getItem('usuarioProfissionalId')) return 'profissional'; if(sessionStorage.getItem('clienteUsuarioId')) return 'cliente'; return null; }
  function getIniciais(nome){ if(!nome) return ''; return nome.split(' ').slice(0,2).map(p=>p[0]).join('').toUpperCase(); }
  function ajustarNavbar(){
    const itemCadastroProfissional=document.getElementById('itemCadastroProfissional');
    const itemLoginCliente=document.getElementById('itemLoginCliente');
    const itemLoginProf=document.getElementById('itemLoginProf');
    const userDropdown=document.getElementById('userDropdown');
    const userDisplayName=document.getElementById('userDisplayName');
    const userAvatar=document.getElementById('userAvatar');
    const menuMeuPerfilProfissional=document.getElementById('menuMeuPerfilProfissional');
    const menuMeuPerfilCliente=document.getElementById('menuMeuPerfilCliente');
    const dividerPerfil=document.getElementById('dividerPerfil');
    const btnSouProfissional=document.getElementById('btnSouProfissional');
    if(usuarioLogado()){
      itemCadastroProfissional.classList.add('d-none'); itemLoginCliente.classList.add('d-none'); itemLoginProf.classList.add('d-none'); userDropdown.classList.remove('d-none');
      const tipo=tipoLogado(); if(tipo==='profissional'){ btnSouProfissional.classList.add('d-none'); }
      const nomeProf=sessionStorage.getItem('usuarioNome')||sessionStorage.getItem('usuarioLogin'); const nomeCli=sessionStorage.getItem('clienteNome')||sessionStorage.getItem('clienteLogin'); const nome=nomeProf||nomeCli||'Usuário';
      userDisplayName.textContent = nome.length>18? (nome.substring(0,15)+'…'):nome;
      const fotoProf=sessionStorage.getItem('usuarioFoto'); const fotoCli=sessionStorage.getItem('clienteFoto'); const foto=fotoProf||fotoCli;
      if(foto){userAvatar.innerHTML = '<img src="'+foto+'" alt="avatar" style="width:100%;height:100%;object-fit:cover;border-radius:50%;">';}else{const iniciais=getIniciais(nome); userAvatar.innerHTML = iniciais || '<i class="bi bi-person-fill"></i>';}
      if(tipo==='profissional'){ 
        menuMeuPerfilProfissional.classList.remove('d-none'); 
        menuMeuPerfilCliente.classList.add('d-none');
        dividerPerfil.classList.remove('d-none'); 
      } else if(tipo==='cliente'){
        menuMeuPerfilCliente.classList.remove('d-none');
        menuMeuPerfilProfissional.classList.add('d-none');
        dividerPerfil.classList.remove('d-none');
      }
      userDropdown.classList.add('fade-in');
    }else{ itemCadastroProfissional.classList.remove('d-none'); itemLoginCliente.classList.remove('d-none'); itemLoginProf.classList.remove('d-none'); userDropdown.classList.add('d-none'); btnSouProfissional.classList.remove('d-none'); }
  }
  function fazerLogout(){ ['usuarioProfissionalId','usuarioLogin','clienteUsuarioId','clienteLogin','clienteId','usuarioNome','usuarioFoto','clienteNome','clienteFoto'].forEach(k=>sessionStorage.removeItem(k)); setTimeout(()=>{ ajustarNavbar(); location.href='./index.html'; },300); }
  function scrollToLista(){ document.getElementById('filtrosSection').scrollIntoView({behavior:'smooth',block:'start'}); }
  document.addEventListener('DOMContentLoaded',function(){ ajustarNavbar(); const navLinks=document.querySelectorAll('.nav-link'); navLinks.forEach(l=>{ l.addEventListener('mouseenter',function(){ this.style.transform='translateY(-1px)';}); l.addEventListener('mouseleave',function(){ this.style.transform='translateY(0)';});}); });
</script>
</body>
</html>
